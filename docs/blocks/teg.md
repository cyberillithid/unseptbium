# Thermoelectrical generator
`/obj/machinery/generator`

Stats:
- $\eta_T = 0.65$ -- thermal efficiency

Basically:
- we take two quantities of gas from turbines (with temperatures $T_1,T_2$ and total heat capacities $C_1,C_2$); to simplify, let's say that upper $T_1>T_2$;
- we get $\Delta T = T_1-T_2$ and $\Delta E = \Delta T \dfrac{C_1C_2}{C_1+C_2}$;
- from that we get $\Delta Q=(1-\eta_T)\Delta E$ and $E_T = \eta_T \Delta E$; $E_T$ is generated exchange energy;
- we update $T_1 -= \Delta E/C_1$ (heat removed) and $T_2 += \Delta Q/C_2$ (waste heat added).

Obviously, $C_1=c_{v1,m}\nu_1$ and similar. We may as well denote reduced heat capacity $\tilde{C} = \dfrac{C_1C_2}{C_1+C_2}$; 
and, if both contours have the exactly same species mole fractions, i.e., equal specific heat, $\tilde{C} = c_{v,m} \dfrac{\nu_1\nu_2}{\nu_1+\nu_2} = c_{v,m} V_t \dfrac{\nu_c\nu_h}{V_c\nu_h + V_h\nu_c}$

Total power generated by TEG is $\mathcal{P} \Delta\tau = E_T + E_1 + E_2$, where $E_{1,2}$ is the turbine-generated power.

Thus, to properly define all these things, we need to determine $E_{1,2}$ and $\nu_{1,2}$.

## TEG Turbine
`/obj/machinery/atmospherics/binary/circulator`

$V_i = 0.4$ m3, $V_o = 0.2$ m3 -- owned volumes (in, out)

$\eta_K=0.04$ -- kinetic & kinetic-to-electric combined

$f_V = 0.2$ -- volume ratio (?)

$\varkappa = \gamma - 1 = 0.66$ -- where $\gamma$ is adiabatic exponent

$V_i^*, V_o^*$ -- volume of networks in respective dirs

$\Delta P = \max(P_i - P_o - 5\text{ kPa}, 0)$

if $\Delta P>5$ kPa:

$\Delta \nu_{\max} = \dfrac{\Delta P V_i^*}{3 T_i R}$

<!-- $f_V = \min(1, \dfrac{\Delta P V_i^*}{P_i V_i}) $ -- `volume capacity used` (unused) -->

$E_i = \min(\Delta P V_i^*, P_i V_i)$

$E = \dfrac{E_i}{\varkappa}  (1-f_V^\varkappa) \eta_K = E_i \eta_V$ -- `stored energy`

$\eta_V = \dfrac{\eta_K}{\varkappa} (1-f_V^\varkappa) \approx 0.0396$ -- const,

$\nu = \min(\Delta \nu_{\max}, \dfrac{P_iV_i}{RT_i})
= \dfrac{1}{RT_i} \min(\dfrac{\Delta P V_i^*}{3}, P_iV_i)$ -- this is amount of substance used.

## returning to TEG

Thus, $\Delta P_1 = (P_{1i}-P_{1o}')$, _2 same; $P_{2o'}=P_{2o}-5\text{ kPa}$;

$E_1=\eta_V \min(\Delta P_1 V_{1i}^*, P_{1i}V_{i})$,
$\nu_1=\dfrac{1}{RT_{1i}} \min(\Delta P_1 V_{1i}^*/3, P_{1i}V_{i})$

...
